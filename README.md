# node-argon2 [![NPM package][npm-image]][npm-url] [![Build status][travis-image]][travis-url] [![Coverage status][coverage-image]][coverage-url] [![Code Quality][codequality-image]][codequality-url] [![Dependencies][david-dm-image]][david-dm-url]
Bindings to the  reference [Argon2](https://github.com/P-H-C/phc-winner-argon2)
implementation.

### Before installing
You **MUST** have a **node-gyp** global install before proceeding with install.
**node-argon2** works only and is tested against >=4.0.0 .

### Usage
It's possible to hash a password using both Argon2i (default) and Argon2d, sync
and async, and to verify if a password matches a hash, and also generate random
cryptographically-safe salts. Salts **must** be exactly 16-byte long buffers.

To hash a password:
```js
var argon2 = require('argon2');
var salt = new Buffer('somesaltwith16ch');

argon2.hash('password', salt).then(hash => {
  // ...
}).catch(err => {
  // ...
});

// OR

try {
  var hash = argon2.hashSync('password', salt);
} catch (err) {
  console.log(err);
}
```
Resultant hashes will be 90 characters long. You can choose between Argon2i and
Argon2d by passing an object as the third argument with the `argon2d` key set to
whether or not you want Argon2d:
```js
argon2.hash('password', salt, {
  argon2d: true
}.then(hash => {
  // ...
});

// OR

try {
  var hash = argon2.hashSync('password', salt, {
    argon2d: true
  });
} catch (err) {
  // ...
}
```
The `argon2d` option is flexible and accepts any truthy or falsy values.

You can provide your own salt as the second parameter. It is **highly**
recommended to use the salt generating methods instead of a hardcoded, constant
salt:
```js
argon2.generateSalt().then(salt => {
  // ...
});

// OR

var salt = argon2.generateSaltSync();
```
Please keep in mind synchronous salt generation is blocking, since it waits for
entropy when enough is not available, so please refrain from using sync version.

You can also modify time, memory and parallelism constraints passing the object
as the third parameter, with keys `timeCost`, `memoryCost` and `parallelism`,
respectively defaulted to 3, 12 (meaning 2^12 KB) and 1 (threads):
```js
argon2.generateSalt().then(salt => {
  argon2.hash('password', salt, {
    timeCost: 4, memoryCost: 13, parallelism: 2
  }.then(hash => {
    // ...
  });
});

// OR

var hash = argon2.hashSync('password', argon2.generateSaltSync(), {
  timeCost: 4, memoryCost: 13, parallelism: 2
});
```

The default parameters for Argon2 can be accessed with `defaults`:
```js
console.log(argon2.defaults);
// => { timeCost: 3, memoryCost: 12, parallelism: 1, argon2d: false }
```

To verify a password:
```js
argon2.verify('<big long hash>', 'password').then(() => {
  // password match
}).catch(() => {
  // password did not match
});

// OR

if (argon2.verifySync('<big long hash>', 'password')) {
  // password match
} else {
  // password did not match
}
```
First parameter must have been generated by an Argon2 encoded hashing method,
not raw.

# License
Work licensed under the [MIT License](LICENSE). Please check
[P-H-C/phc-winner-argon2] (https://github.com/P-H-C/phc-winner-argon2) for
license over Argon2 and the reference implementation.

[npm-image]: https://img.shields.io/npm/v/argon2.svg?style=flat-square
[npm-url]: https://www.npmjs.com/package/argon2
[travis-image]: https://img.shields.io/travis/ranisalt/node-argon2/master.svg?style=flat-square
[travis-url]: https://travis-ci.org/ranisalt/node-argon2
[coverage-image]: https://img.shields.io/coveralls/ranisalt/node-argon2/master.svg?style=flat-square
[coverage-url]: https://coveralls.io/github/ranisalt/node-argon2
[codequality-image]: https://img.shields.io/codacy/15927f4eb15747fd8a537e48a04bd4f6/master.svg?style=flat-square
[codequality-url]: https://www.codacy.com/app/ranisalt/node-argon2
[david-dm-image]: https://img.shields.io/david/ranisalt/node-argon2.svg?style=flat-square
[david-dm-url]: https://david-dm.org/ranisalt/node-argon2
